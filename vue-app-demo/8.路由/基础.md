# 路由

1. 前端路由：不刷新界面；后端路由：刷新界面

2. 安装
- 在项目文件下`vue add router`,是否选择历史模式-选择 no
  - 可在"index.js"中配置`mode:history`
  ```javascript
  const router = new VueRouter({
    mode:"history",
    routes
  })
  ```
- 下载完成之后路由配置是在 router 文件夹下的 index.js文件中
- 配置文件中的 `Vue.use(VueRouter)` 是router生效的关键，会在vue实例中生成 **$router**(存放路由函数)和 **$route**(存放路由属性)
  - **$router.push('路径')**,可以在方法中使其直接跳转到改路径下的路由中,回退时会回退到你上一个点击的页面
  - **$router.replace('路径')**,可以在方法中使其直接跳转到改路径下的路由中，回退时会回退到被点击前的前一个页面
  - **$router.go(.../-1/0/1/2/...)**,页面跳转，跳转到页面栈中的第几个页面，0代表当前页面，-1代表当前页面的前一个页面，1代表后一个页面
    - 可用在页面中没有路由的节点上，通过触发事件进行跳转：
    ```javascript
    export default {
      methods:{
        handleCilck() {
          this.$router.push('/home')
        }
      }
    }
    ```
- 页面级组件放在 **views** 文件夹下,小组件放在 **components** 文件下

3. 路由配置文件index.js
```javascript
const routes = [
  {
    path: '/', //路径
    name: 'home', //路由
    component: Home //组件
  },
  {
    path: '/about',
    name: 'about',
    component: () => import(/* webpackChunkName: "about" */ '../views/About.vue') //懒加载
  }
]
```
- 懒加载的目的是让组件不与首屏加载一起，在需要跳转到该页面时再进行加载该页面
- vue中为当前点击的路由标签给定了类名：active-exact 为自定义该类名
```javascript
  linkExactActiveClass: "active-exact"
```
- vue中为当前点击和当前点击的路由所包含的所有父级路由标签都给定了一个统一的类名： active 为自定义类名
```javascript
  linkActiveClass: "active",
```
  - 该特性有个问题，当选中了该路由下嵌套路由时，该路由也会有相应的特性，此时就会用到 active 类名，但是所有的路由都会包含根路由，因此根路由也会具有 active 属性。以下为解决办法
    1. 将根路由的 "/" 改为 带字母的其他路径名都行，反正不要用 / 代表根路由

4. 主文件main.js中
```javascript
import router from './router' //引入router组件

new Vue({
  router, //使用router组件
  render: h => h(App)
}).$mount('#app')
```

5. App.vue文件
```html
<router-view/> <!-- 打开浏览器时默认组件展示的区域-->
<router-link to="/">Home</router-link> |
<router-link to="/about">About</router-link> <!--帮助页面点击跳转-->
```
- to 属性：后面跟的是跳转路径
- to 可写为绑定属性 :to={path:'/'}后面接路径 或者:to={name:'home'}接路径名字
- router-link 标签通常被渲染为a标签，可以给其一个 **tag="li"**属性，规定其渲染成 li 标签

# 嵌套路由

1. 直接在路由下添加 children 属性，即为该路由的子路由，注意：
- children中的path路径不加 / 会自动寻找父级的路径进行拼接，如果写上 / 就按写的路径来
```javascript
 children:[
      {
        path: 'academic',
        name: 'academic',
        component: () => import('../components/Academic.vue')
      }]
```
2. 需要在添加子路由的页面中新增 `<router-view />和<router-link />`标签

3. 路由重定向
- 写在需要重定位的页面组件的路由配置下
```javascript
{
      path: '/community',
      name: 'community',
      component: () => import('./views/Community'),
      redirect: '/community/academic', //路由重定向，使页面首次切换到community时选中它的academic路由
}
```
- 可以用于页面首次进入时的默认选中
- 可以用于特定的跳转情况:
  - 跳转路径均不在设定路径时显示其他页面时:
  ```javascript
  {
    path: '*', 
    //代表去匹配所有的设定的路径，当path不存在于设定路径中时，相当于path就走到了'*'这里，然后执行redirect方法
    redirect(to) {
      // redirect不仅可以直接写重定向之后的路径，还可以写函数
      if(to.path === '/'){
        return "/home"  
        //用户输入网页链接时不需要再输主页'/home'这个路由的路径，如“localhost:8080/home”,直接输入“localhost:8080”即可跳转到主页中
      }else{
        return "/notfound"
        //当用户输入的路径不存在我们设定的路径中时，显示404页面
      }
    }
  }
  ```